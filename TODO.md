# 📋 Backlog (タスク管理)

## Inbox (未整理メモ)

<!-- ここに思いついたことを自由に書いてください。AIが後で整理・分類します。 -->

---

## Bugs (不具合)

- [ ] **インクリメンタルキャッシュ更新の検証**
  - `src/backend/05-2_Backend_Write.js` の `addReservationToCache` 使用箇所(L545付近)に「要確認」コメントあり
  - 新規予約時のキャッシュ更新と `rowForCache` のデータ形式を確認

- [x] ~~売上の別シートへの自動転載が機能していない~~ (解決済み: 2024/12)
- [x] ~~ログシートに空行が生じる~~ (解決済み: appendRow方式に変更)

---

## UI Improvements (UI改善)

### セッション終了フロー関連

- [x] **予約画面のUI改善** (2026/01)

  #### スロットカード（選択中の日程表示）
  - [x] `renderSlotCard` で統一レンダラー化
  - [x] 「経験者のみ」ラベル表示
  - [x] 満席時の表示改善（「満席 → 空き通知 とうろく」）
  - [x] バッジ表示をシンプル化（「こちらは いかがでしょうか？」に変更）

  #### 日程リスト（日程一覧）
  - [x] 予約済みの日程に「よやく済」マークを表示
  - [x] 空き通知登録済みの日程に「空き通知とうろく中」マークを表示
  - [x] 満席時は「満席」のみ表示
  - [x] ★おすすめ表示を削除（シンプル化）

  #### 既存予約・予約変更
  - [x] 予約済みの場合に進むボタンが表示されないバグ修正
  - [x] 予約済みの日程を選択した場合、「よやく済」表示に切り替え
  - [x] 時間制教室で予約済みの場合、時間選択プルダウンで修正可能

  #### リファクタリング (2026/01)
  - [x] `getLessonInfo` で重複関数を統合
  - [x] `getSlotDescriptionText` 削除（バッジと重複）
  - [x] 予約後のけいかく更新バグ修正

  #### 材料・注文品
  - [ ] 材料/注文品入力用のモーダル or 折りたたみボタン設置

- [ ] **会計画面のUIを統一**
  - 他の画面との統一感を持たせる

### ダッシュボード関連

### 予約画面関連

- [ ] 「参加枠の表示」ボタンを過去予約がない人に限定
- [ ] セッション終了フローの予約画面と似たデザインにする

### 参加者ビュー関連

- [ ] **みんなのよやく・きろく UI/UX検討**
  - 予約と記録の分離を検討
  - 参加者ビューの整理
- [ ] PC表示時のレイアウト調整
- [ ] コンテナの表示幅を広く固定し、スクロールをコンテナ全体に対しておこなうようにする

---

## Features (機能追加)

### ログ関連

- [ ] ログシートの記載内容改善
  - セッション終了フローからのシート操作を識別可能にする
- [ ] ユーザーのページ遷移・画面表示ログの取得・可視化
- [ ] 管理者モードでログ内容をアプリ内で確認可能にする

### データ管理関連

- [ ] **`setDataFreshness` 機能の実装**
  - 予約完了時などに再取得を防ぐフラグ管理機能
  - `SimpleStateManager` に `setDataFreshness(key, boolean)` メソッド追加

---

## Refactoring (リファクタリング)

- [x] SessionConclusion関連の重複コード整理 (2026/01)
- [ ] 不要なコードを削除する

---

## Completed (完了済み)

<!-- 完了後は日付とともにここに移動 -->

- [x] SessionConclusion UIリファクタリング (2026/01)
  - `getLessonInfo` 統合、未使用コード削除、UIテキスト改善
  - 予約後のけいかく更新バグ修正
- [x] 売上自動転載バグ修正 (2025/12)
- [x] ログシート空行バグ修正(2025/12)
- [x] ログ/予約シート昇順ソート対応 (2025/12)
- [x] ログシート自動スクロール機能追加 (2025/12)
- [x] きろくカードのシンプル化 (2025/12)
- [x] きろくカードのリストビュー化 (2025/12)
