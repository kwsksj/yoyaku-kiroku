# JavaScriptåˆ†é›¢é–‹ç™ºã¸ã®ç§»è¡Œæ‰‹é †æ›¸

## å‰ææ¡ä»¶

- ç¾åœ¨ã®`src/`ãƒ•ã‚©ãƒ«ãƒ€ã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒGASã§æ­£å¸¸å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨
- å…¨ã¦ã®å¤‰æ›´ãŒã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- ãƒ†ã‚¹ãƒˆç’°å¢ƒãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨

## ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æº–å‚™

### 1. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install --save-dev chokidar@^4.0.0
```

### 2. é–‹ç™ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ

```bash
# é–‹ç™ºç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
mkdir -p dev/{backend,frontend,templates}

# æ—¢å­˜srcã®å®‰å…¨ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp -r src src_backup_$(date +%Y%m%d_%H%M%S)
```

### 3. ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®å‹•ä½œç¢ºèª

```bash
# ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run dev:build

# ç›£è¦–ãƒ¢ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆï¼ˆCtrl+Cã§çµ‚äº†ï¼‰
npm run dev:watch
```

## ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼ˆæ®µéšçš„å®Ÿè¡Œï¼‰

### 2-1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œ

**å„ªå…ˆåº¦: ä½ï¼ˆå˜ç´”ã‚³ãƒ”ãƒ¼ã®ãŸã‚ï¼‰**

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰JSãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ç™ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
mv src/00_Constants.js dev/backend/
mv src/01_Code.js dev/backend/
mv src/02-1_BusinessLogic_Batch.js dev/backend/
mv src/02-4_BusinessLogic_ScheduleMaster.js dev/backend/
mv src/04_Backend_User.js dev/backend/
mv src/05-2_Backend_Write.js dev/backend/
mv src/05-3_Backend_AvailableSlots.js dev/backend/
mv src/06_ExternalServices.js dev/backend/
mv src/07_CacheManager.js dev/backend/
mv src/08_ErrorHandler.js dev/backend/
mv src/08_Utilities.js dev/backend/
mv src/09_Backend_Endpoints.js dev/backend/
```

### 2-2. HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç§»è¡Œ

```bash
# WebAppãƒ¡ã‚¤ãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç§»è¡Œ
mv src/10_WebApp.html dev/templates/
```

### 2-3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼ˆé‡è¦ï¼‰

**ğŸš¨ æœ€ã‚‚æ…é‡ã«å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—**

#### ãƒ•ã‚§ãƒ¼ã‚º2-3a: StateManagerç§»è¡Œï¼ˆæœ€å„ªå…ˆï¼‰

```bash
# StateManagerãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»è¡Œæº–å‚™
cp src/12_WebApp_StateManager.html dev/frontend/12_WebApp_StateManager.js

# HTMLã‚¿ã‚°ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¦JavaScriptéƒ¨åˆ†ã®ã¿æŠ½å‡º
# ä»¥ä¸‹ã¯æ‰‹å‹•ç·¨é›†ãŒå¿…è¦:
# 1. <script>ã¨</script>ã‚¿ã‚°ã‚’å‰Šé™¤
# 2. HTMLç‰¹æœ‰ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆ@ts-nocheckç­‰ï¼‰ã‚’èª¿æ•´
# 3. å‹ãƒã‚§ãƒƒã‚¯å•é¡Œã‚’è§£æ±º
```

**æ‰‹å‹•ç·¨é›†ä¾‹:**
```javascript
// dev/frontend/12_WebApp_StateManager.js
/**
 * =================================================================
 * ã€ãƒ•ã‚¡ã‚¤ãƒ«åã€‘: 12_WebApp_StateManager.js
 * ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‘: 2.1 (JavaScriptåˆ†é›¢é–‹ç™ºç‰ˆ)
 * ã€å½¹å‰²ã€‘: ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®ŸãªçŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
 * =================================================================
 */

// TypeScriptå‹å®šç¾©
/// <reference path="../../html-globals.d.ts" />

// ESLintè¨­å®šï¼ˆé–‹ç™ºæ™‚ã¯å®Œå…¨ãƒã‚§ãƒƒã‚¯æœ‰åŠ¹ï¼‰
/* global CONSTANTS:readonly, STATUS:readonly, ... */

/**
 * ã‚·ãƒ³ãƒ—ãƒ«ãªçŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
 */
class SimpleStateManager {
  // ã‚¯ãƒ©ã‚¹å®Ÿè£…ã¯ãã®ã¾ã¾
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
window.stateManager = new SimpleStateManager();
```

#### ãƒ•ã‚§ãƒ¼ã‚º2-3b: ãã®ä»–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«é †æ¬¡ç§»è¡Œ

```bash
# 1ã¤ãšã¤æ…é‡ã«ç§»è¡Œ
cp src/11_WebApp_Config.html dev/frontend/11_WebApp_Config.js
# æ‰‹å‹•ç·¨é›†...

cp src/12_WebApp_Core.html dev/frontend/12_WebApp_Core.js  
# æ‰‹å‹•ç·¨é›†...

cp src/13_WebApp_Components.html dev/frontend/13_WebApp_Components.js
# æ‰‹å‹•ç·¨é›†...

cp src/13_WebApp_Views.html dev/frontend/13_WebApp_Views.js
# æ‰‹å‹•ç·¨é›†...

cp src/14_WebApp_Handlers.html dev/frontend/14_WebApp_Handlers.js
# æ‰‹å‹•ç·¨é›†...
```

### 2-4. å„ç§»è¡Œå¾Œã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

**å„ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œå¾Œã«å¿…ãšå®Ÿè¡Œ:**

```bash
# 1. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
npm run dev:build

# 2. å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintç¢ºèª
npm run check

# 3. ãƒ†ã‚¹ãƒˆç’°å¢ƒãƒ—ãƒƒã‚·ãƒ¥
npm run dev:test

# 4. å‹•ä½œç¢ºèªï¼ˆWebAppï¼‰
npm run open:dev:test
```

## ãƒ•ã‚§ãƒ¼ã‚º3: å‹•ä½œæ¤œè¨¼ãƒ»æœ€é©åŒ–

### 3-1. å®Œå…¨å‹•ä½œãƒ†ã‚¹ãƒˆ

```bash
# ãƒ•ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
npm run dev:build
npm run check
npm run dev:test

# WebAppå…¨æ©Ÿèƒ½ç¢ºèª
# - ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
# - äºˆç´„ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
# - ä¼šè¨ˆæ©Ÿèƒ½
# - å±¥æ­´è¡¨ç¤º
# - å„ç¨®ãƒ‡ãƒ¼ã‚¿å–å¾—
```

### 3-2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª

- ãƒ“ãƒ«ãƒ‰æ™‚é–“æ¸¬å®š
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºæ¯”è¼ƒï¼ˆsrc_backup vs æ–°srcï¼‰
- å®Ÿè¡Œæ™‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª

### 3-3. é–‹ç™ºåŠ¹ç‡ç¢ºèª

```javascript
// VSCodeå†…ã§å‹ãƒã‚§ãƒƒã‚¯ãƒ»IntelliSenseå‹•ä½œç¢ºèª

// 1. é–¢æ•°å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ï¼ˆF12ï¼‰
stateManager.dispatch();

// 2. å‹ã‚¨ãƒ©ãƒ¼æ¤œå‡º
const invalidState = stateManager.getState().nonExistentProperty; // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã•ã‚Œã‚‹ã‹ï¼Ÿ

// 3. ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ
CONSTANTS.  // <- ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¡¨ç¤ºã•ã‚Œã‚‹ã‹ï¼Ÿ
```

## ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç§»è¡Œ

### 4-1. æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¸ã®å®Œå…¨ç§»è¡Œ

**å¾“æ¥:**
```bash
# ç·¨é›†: src/ ç›´æ¥
# ãƒ†ã‚¹ãƒˆ: npm run push:test
```

**æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:**
```bash
# ç·¨é›†: dev/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
# ãƒ†ã‚¹ãƒˆ: npm run dev:test
# ç›£è¦–: npm run dev:watchï¼ˆé–‹ç™ºä¸­ï¼‰
```

### 4-2. CLAUDE.mdã®æ›´æ–°

```markdown
## æ–°é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (JavaScriptåˆ†é›¢é–‹ç™º)

### é–‹ç™ºæ™‚
- **ç·¨é›†å¯¾è±¡**: `dev/backend/`, `dev/frontend/`, `dev/templates/`
- **å‹ãƒã‚§ãƒƒã‚¯**: VSCode + TypeScript Language Serverï¼ˆãƒ•ãƒ«æ©Ÿèƒ½ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: `npm run dev:watch`

### ãƒ†ã‚¹ãƒˆæ™‚  
- **ãƒ“ãƒ«ãƒ‰â†’ãƒ†ã‚¹ãƒˆ**: `npm run dev:test`
- **ãƒ†ã‚¹ãƒˆç’°å¢ƒç¢ºèª**: ãƒ†ã‚¹ãƒˆç”¨WebAppã§å‹•ä½œç¢ºèª

### ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚
- **æœ¬ç•ªãƒ—ãƒƒã‚·ãƒ¥**: `npm run dev:prod`
- **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**: `npm run deploy:prod`

### å‹å®‰å…¨æ€§
- é–‹ç™ºæ™‚: å®Œå…¨ãªTypeScriptå‹ãƒã‚§ãƒƒã‚¯ + ESLint
- ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œ: GASç’°å¢ƒã§ã‚‚å‹æƒ…å ±ç¶­æŒ
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™å•é¡Œ
chmod +x tools/js-to-html-builder.js

# ä¾å­˜é–¢ä¿‚å•é¡Œ  
npm install
```

### 2. å‹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼

```javascript
// html-globals.d.ts ã®æ›´æ–°ãŒå¿…è¦ãªå ´åˆ
/// <reference path="../../html-globals.d.ts" />

// ç‰¹å®šã®å‹ã‚¨ãƒ©ãƒ¼å›é¿
/** @type {any} */
const problematicVariable = window.someGASSpecificProperty;
```

### 3. ç·Šæ€¥ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

```bash
# å•é¡Œç™ºç”Ÿæ™‚ã®ç·Šæ€¥å¾©æ—§
rm -rf src/
cp -r src_backup_YYYYMMDD_HHMMSS src/
npm run push:test
```

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã®é™¤å¤–è¨­å®š
# .gitignoreã«è¿½åŠ :
dev/node_modules/
dev/.cache/
src_backup_*/
```

## æˆåŠŸæŒ‡æ¨™

### âœ… ç§»è¡ŒæˆåŠŸã®åˆ¤æ–­åŸºæº–

1. **æ©Ÿèƒ½é¢**
   - [ ] å…¨WebAppæ©Ÿèƒ½ãŒæ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§æ­£å¸¸å‹•ä½œ
   - [ ] ãƒ“ãƒ«ãƒ‰â†’ãƒ†ã‚¹ãƒˆâ†’ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼ãŒå®‰å®šå‹•ä½œ
   - [ ] æ—¢å­˜GASç’°å¢ƒã¨ã®100%äº’æ›æ€§ç¶­æŒ

2. **é–‹ç™ºåŠ¹ç‡é¢**
   - [ ] VSCodeã§å®Œå…¨ãªå‹ãƒã‚§ãƒƒã‚¯ãƒ»IntelliSenseå‹•ä½œ
   - [ ] ESLint/PrettierãŒfdev/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§æ­£å¸¸å‹•ä½œ  
   - [ ] ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚³ãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„

3. **ã‚³ãƒ¼ãƒ‰å“è³ªé¢**
   - [ ] HTMLå…§JavaScriptå‹ãƒã‚§ãƒƒã‚¯å•é¡Œã®å®Œå…¨è§£æ±º
   - [ ] å¤§é‡ESLintã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆ
   - [ ] ä¿å®ˆæ€§ãƒ»å¯èª­æ€§ã®å¤§å¹…æ”¹å–„

### ğŸ“Š æ•°å€¤ç›®æ¨™

- **å‹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼**: 200+ â†’ 0
- **é–‹ç™ºåŠ¹ç‡**: HTMLå†…ç·¨é›† â†’ JavaScriptç’°å¢ƒï¼ˆä½“æ„Ÿ3-5å€æ”¹å–„ï¼‰
- **ãƒ“ãƒ«ãƒ‰æ™‚é–“**: <5ç§’ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰

## æœ€çµ‚ç¢ºèªäº‹é …

### ç§»è¡Œå®Œäº†å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] src_backupãƒ•ã‚©ãƒ«ãƒ€ãŒå®‰å…¨ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹
- [ ] æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã®å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] package.jsonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‹•ä½œç¢ºèªå®Œäº†  
- [ ] CLAUDE.mdæ›´æ–°å®Œäº†
- [ ] ãƒãƒ¼ãƒ å†…ï¼ˆã¾ãŸã¯è‡ªåˆ†ï¼‰ã¸ã®æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼èª¬æ˜å®Œäº†

### ç§»è¡Œå¾Œã®æ¨å¥¨äº‹é …

1. **å®šæœŸçš„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: devãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®Gitã‚³ãƒŸãƒƒãƒˆé »åº¦ã‚’ä¸Šã’ã‚‹
2. **ãƒ“ãƒ«ãƒ‰è‡ªå‹•åŒ–**: pre-commitãƒ•ãƒƒã‚¯å°å…¥æ¤œè¨
3. **ç¶™ç¶šçš„æ”¹å–„**: å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®æ®µéšçš„å……å®Ÿ
4. **ç›£è¦–ç¶™ç¶š**: æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã®é–‹ç™ºåŠ¹ç‡ã¨ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

---

ã“ã®ç§»è¡Œã«ã‚ˆã‚Šã€GASé–‹ç™ºã«ãŠã‘ã‚‹ç¾ä»£çš„ãªJavaScripté–‹ç™ºç’°å¢ƒãŒå®Ÿç¾ã•ã‚Œã€å‹å®‰å…¨æ€§ã¨é–‹ç™ºåŠ¹ç‡ãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚