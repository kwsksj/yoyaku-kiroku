# プロジェクト構成定義

- **ファイル名:** `00_Project_Structure.md`
- **バージョン:** 1.0
- **役割:** このプロジェクト全体のファイル構成と、各ファイルの責務を定義する。プロジェクトの全体像を把握するための、最も基本的なドキュメント（地図）である。
- **備考:** このファイルはコードとしての実行を目的としない。

---

## プロジェクト全体のファイル構成 (全18ファイル)

### バックエンド: Google Apps Script (`.gs`)

- **`01_Code.gs`**
  - **役割:** グローバル定数、UI定義（カスタムメニュー）、トリガー関数（onEdit, onChange）を集約する、プロジェクトのエントリーポイント。

- **`02-1_BusinessLogic_Batch.gs`**
  - **役割:** メニューから手動で実行される、重いバッチ処理（予約データのアーカイブ、売上転記など）を集約する。

- **`02-2_BusinessLogic_Handlers.gs`**
  - **役割:** リアルタイムなシート操作に応答するイベントハンドラ群。トリガーからの処理の振り分けと、具体的な処理の実行を担当する。

- **`02-3_BusinessLogic_SheetUtils.gs`**
  - **役割:** ハンドラから呼び出される、シート操作の汎用的な部品（ソート、再採番、データ補完など）を集約する。

- **`03_BusinessLogic_Summary.gs`**
  - **役割:** 「予約サマリー」シートの構築と更新に特化したロジック。WebAppの表示速度の要。

- **`04_Backend_User.gs`**
  - **役割:** WebAppからのユーザー認証・管理（登録、プロフィール更新）に関するバックエンド機能。

- **`05-1_Backend_Read.gs`**
  - **役割:** WebAppからのデータ取得要求（Read）に特化したバックエンド機能。

- **`05-2_Backend_Write.gs`**
  - **役割:** WebAppからのデータ書き込み・更新要求（Write）と、それに付随する検証ロジックに特化したバックエンド機能。

- **`06_ExternalServices.gs`**
  - **役割:** GoogleフォームやGoogleカレンダーといった、外部サービスとの連携に特化した機能。

- **`07_CacheManager.gs`**
  - **役割:** 生徒名簿のキャッシュ列（参加回数など）を更新する、重く独立したバッチ処理。

- **`08_Utilities.gs`**
  - **役割:** プロジェクト全体で利用される、業務ドメインに依存しない汎用的なヘルパー関数（エラー処理、HTMLインクルードなど）を格納する。

- **`09_Backend_Endpoints.gs`**
  - **役割:** WebAppからの呼び出しを集約する統合エンドポイント。通信回数を削減し、UXを向上させる。

### フロントエンド: WebApp (`.html`)

- **`10_WebApp.html`**
  - **役割:** WebAppの骨格となるメインHTMLファイル。CSS定義と、外部JavaScriptファイルのインクルードのみを行う。

- **`11_WebApp_Config.html`**
  - **役割:** WebAppの基本的な定数やデザイン設定（色、フォントなど）を集約する。

- **`12_WebApp_Core.html`**
  - **役割:** 状態管理、UIコンポーネント生成、汎用ユーティリティ、計算ロジックなど、WebAppのコア機能を集約する。

- **`13_WebApp_Views.html`**
  - **役割:** 各画面（ログイン、予約一覧など）のHTML構造を生成する、ビュー関数群を集約する。

- **`14_WebApp_Handlers.html`**
  - **役割:** ユーザー操作に応じた処理（アクションハンドラ）と、アプリケーション全体の制御フローを集約する。
