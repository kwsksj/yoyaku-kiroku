# 📋 Backlog (タスク管理)

## Inbox (未整理メモ)

<!-- ここに思いついたことを自由に書いてください。AIが後で整理・分類します。 -->

## Bugs (不具合)

- [ ] **バックエンド: インクリメンタルキャッシュ更新の検証** (`src/backend/05-2_Backend_Write.js`)
  - `addReservationToCache` の使用箇所(L545付近)に「要確認」コメントあり。新規予約時のキャッシュ更新が正しく行われているか、特に `rowForCache` のデータ形式が正しいか確認が必要。

- [ ] 売上の別シートへの自動転載が機能していない
  - ログシートには転載した旨が書いてあるのに、実際は転載されていない
  - シートのメニューボタンからの「日付を指定して転載」は機能する
- [ ] ログシートに、何も書かれていない空行が生じている

## UI Improvements (UI改善)

- [ ] セッション終了フローの予約画面のUI改善
  - [ ] よやくスロットカードをComponentsを用いて、統一的なデザインにする
    - 材料や注文品を入力するモーダルか折りたたみ要素を開くボタンの設置
    - 「経験者のみ」「初回者あり」と言ったカード表示
    - 満席の場合の表示確認
  - [ ] スロットカードの上に簡単な説明を表示する
    - おすすめ日程の場合：「おすすめのにってい（きょうとにたにってい）」
    - 教室選択リストの場合：「きぼうのにっていをえらんでください」

- [ ] セッション終了フロー時の会計画面のUIを、他の画面と統一感を持たせる

- [ ] ダッシュボード画面の「きろくカード」をシンプル化する
  - [ ] 「かくにん・へんしゅう」ボタンを削除
  - [ ] セッションノートを編集する「へんしゅう」ボタンを、小さくテキストエリアの中に設置（けいかくカードと同じ形式にする）
  - [ ] 会計確認は、メニューボタンから行えるようにする

- [ ] 「みんな の よやく・きろく」のUI/UX検討
  - [ ] 予約と記録を分離する？（「きろく」を見やすくするため）
  - [ ] 参加者ビューを整理する？

## Features (機能追加・ログ周り)

- [ ] ログシートの記載内容の改善
  - セッション終了フローからのシート操作がわかるようにする
- [ ] ユーザーのページ遷移や画面表示ログを取得・可視化する
- [ ] 管理者モードでログ内容（シートの内容のようなもの）を確認できるようにする（アプリ完結化）

- [ ] **フロントエンド: `setDataFreshness` 機能の実装** (`src/frontend/12_WebApp_StateManager.js`)
  - 予約完了時などにサーバーから最新データを受け取った際、再取得を防ぐためのフラグ管理機能が未実装。
  - `SimpleStateManager` クラスに `setDataFreshness(key, boolean)` メソッドを追加し、`14_WebApp_Handlers_Reservation.js` から利用できるようにする。
