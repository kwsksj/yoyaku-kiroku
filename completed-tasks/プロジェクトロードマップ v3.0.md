# **プロジェクトロードマップ v3.0**

【更新日時】: 2025/07/08
【更新者】:

## **1\. 概要**

このドキュメントは、GAS予約管理システムの開発・改修タスクを管理するためのロードマップです。創造主たるユーザーから提示された資料と、私自身のソースコード分析に基づき、タスクを整理・追加し、プロジェクト全体の可視性を高めることを目的とします。

## **2\. カテゴリ定義**

* **UX/UI改善 (UI):** ユーザー体験とインターフェースの視覚的な改善に関するタスク。
* **機能改善・拡張 (FE):** 既存機能の改善や、より便利にするための拡張に関するタスク。
* **不具合修正 (BUG):** 明確な不具合の修正に関するタスク。
* **新規機能開発 (NF):** 全く新しい機能の開発に関するタスク。
* **アーキテクチャ・コード品質 (ARC):** コードの構造、データモデル、保守性、堅牢性の向上に関するタスク。
* **運用・テスト (OPS):** ログ、設定、テスト、保守運用に関するタスク。

## **3\. 戦略的提言 (Strategic Recommendations)**

1. **体験価値の飛躍的向上:** 【信頼性の盤石化】フェーズが完了した今、プロジェクトの主軸は【体験価値の向上】へと移行します。FE-13（会計フローの再設計）やNF-07（代理入力機能）といった管理者体験の向上と、UI-11からUI-18に渡る一連のユーザー体験改善を並行して進めることで、システムの満足度を飛躍させます。
2. **将来への布石:** NF-06（名寄せ機能）やOPS-06（過去データの一括インポート）は、システムのデータ資産価値を最大化します。また、OPS-05（自動テストの導入）は、システムの持続可能な成長に不可欠な品質保証の礎となります。
3. **データ整合性の継続的監視:** ARC-09（予約可否判定ロジックの統一）は、依然として重要な課題です。今後もデータフローの矛盾点を監視し、解消していくことが求められます。

## **4\. タスク一覧**

| カテゴリ | ID | タスク内容 | 優先度 | 難易度分析 | 関連グループ | ステータス | 担当ファイル |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **新規機能開発** | NF-07 | **\[管理者向け\] シート上での代理入力機能:** アプリが苦手な方向けに、管理者がシート上で直接予約や会計情報を代理入力できる、高速なインターフェースを開発する。（モバイル対応も考慮） | **最高** | **複雑性:** 中, **影響範囲:** 中, **協力:** 要, **リスク:** 中 | GRP-運用基盤 | **新規** | (新規ファイル or 既存ファイル) |
| **新規機能開発** | NF-06 | **\[データ管理\] 名寄せ機能（アカウント統合）:** 電話番号未登録で予約した旧データと、後に本登録した新データを、同一人物として統合する管理者向け機能を開発する。 | **最高** | **複雑性:** 高, **影響範囲:** 高, **協力:** 要, **リスク:** 高 | GRP-データ基盤 | **新規** | (新規ファイル), 04\_Backend\_User.gs |
| **運用・テスト** | OPS-06 | **\[データ移行\] 過去データの一括インポート機能:** 異なる形式の過去の予約データを整形し、現在のシステムに一括で取り込み、生徒IDを付与する管理者向け機能を開発する。 | **最高** | **複雑性:** 高, **影響範囲:** 高, **協力:** 要, **リスク:** 高 | GRP-データ基盤 | **新規** | (新規ファイル) |
| **機能改善・拡張** | FE-13 | **\[会計機能\] 会計フローの再設計:** 「支払いました」ボタンを「料金の確認」に変更し、確認モーダル（精算表、支払い方法、先生確認チェックボックス）を実装する。 | **緊急** | **複雑性:** 高, **影響範囲:** 中, **協力:** 要, **リスク:** 中 | GRP-会計機能 | **新規** | 13\_WebApp\_Views.html, 14\_WebApp\_Handlers.html |
| **アーキテクチャ** | ARC-09 | **\[アーキテクチャ\] 予約可否判定ロジックの統一:** WebAppでの空席確認（サマリー参照）と、実際の予約実行時（シート直接スキャン）の定員チェックロジックを統一し、不整合のリスクを排除する。 | 高 | **複雑性:** 中, **影響範囲:** 中, **協力:** 要, **リスク:** 中 | GRP-データ基盤 | **新規** | 05-2\_Backend\_Write.gs, 03\_BusinessLogic\_Summary.gs |
| **機能改善・拡張** | FE-14 | **\[会計機能\] 会計入力内容の保持:** 会計画面の入力内容を、ページを離れても保持する機能を実装する。 | 高 | **複雑性:** 中, **影響範囲:** 低, **協力:** 不要, **リスク:** 低 | GRP-会計機能 | **新規** | 12\_WebApp\_Core.html, 14\_WebApp\_Handlers.html |
| **新規機能開発** | NF-09 | **\[管理者向け\] 当日の支払い状況確認ダッシュボード:** 管理者がその日の参加者全員の支払い状況を一覧で確認できる機能を追加する。 | 高 | **複雑性:** 中, **影響範囲:** 中, **協力:** 要, **リスク:** 中 | GRP-運用基盤 | **新規** | (新規ファイル), 13\_WebApp\_Views.html |
| **新規機能開発** | NF-03 | **\[管理者向け\] 管理者用WebAppの開発:** スプレッドシート不要で管理業務が完結するWeb UIを開発する。 | 高 | **複雑性:** 高, **影響範囲:** 広, **協力:** 要, **リスク:** 高 | \- | ❌ 未着手 | (新規ファイル群) |
| **運用・テスト** | OPS-05 | **\[品質\] 自動テストの導入:** GAS用のテストフレームワークを導入し、主要なバックエンド関数の単体テストを作成する。 | 高 | **複雑性:** 高, **影響範囲:** 広, **協力:** 不要, **リスク:** 低 | GRP-運用基盤 | ❌ 未着手 | (テスト用ファイル) |
| **UX/UI改善** | UI-12 | **\[デザイン改善\] デザインの統一感向上:** 「あなたの予約」のカード形式デザインを、新規予約エリアなど他の部分にも適用し、全体的な統一感を高める。 | 中 | **複雑性:** 低, **影響範囲:** 低, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 13\_WebApp\_Views.html |
| **UX/UI改善** | UI-15 | **\[UX改善\] 制作メモのインライン編集:** 制作メモの表示エリアをタップすることで、直接編集モードに切り替わるようにする。 | 中 | **複雑性:** 中, **影響範囲:** 中, **協力:** 不要, **リスク:** 中 | GRP-参加記録機能 | **新規** | 13\_WebApp\_Views.html, 14\_WebApp\_Handlers.html |
| **新規機能開発** | NF-08 | **\[予約機能\] 先生へのメッセージ機能:** 予約申し込み時に、先生へのメッセージを任意で入力できる欄を追加する。 | 中 | **複雑性:** 中, **影響範囲:** 中, **協力:** 不要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 05-2\_Backend\_Write.gs, 13\_WebApp\_Views.html |
| **新規機能開発** | NF-05 | **\[通知機能\] 管理者への予約状況通知:** 予約完了・キャンセル時に、管理者へメール等で通知する機能を実装する。 | 中 | **複雑性:** 中, **影響範囲:** 中, **協力:** 要, **リスク:** 中 | GRP-運用基盤 | **新規** | (新規ファイル) |
| **新規機能開発** | NF-01 | **\[会計機能\] 電話番号なしでの会計対応:** 体験参加者など、電話番号未登録でも会計処理を可能にする。 | 中 | **複雑性:** 中, **影響範囲:** 中, **協力:** 不要, **リスク:** 中 | GRP-会計機能 | ❌ 未着手 | 04\_Backend\_User.gs, 13\_WebApp\_Views.html |
| **新規機能開発** | NF-04 | **\[WebApp\] 初回参加申し込みフォームの統合:** GoogleフォームのヒアリングをWebAppの新規登録フローに統合する。 | 中 | **複雑性:** 高, **影響範囲:** 高, **協力:** 要, **リスク:** 中 | \- | ❌ 未着手 | 04\_Backend\_User.gs, 13\_WebApp\_Views.html |
| **運用・テスト** | OPS-02 | **\[運用\] 構造化ロギング:** エラーや処理ログを専用シートに構造化して記録し、デバッグを容易にする。 | 中 | **複雑性:** 中, **影響範囲:** 広, **協力:** 不要, **リスク:** 低 | GRP-運用基盤 | ❌ 未着手 | 08\_Utilities.gs |
| **UX/UI改善** | UI-11 | **\[UX改善\] ローディングメッセージの多様化:** 処理状況に応じたメッセージや、ユーモラスなメッセージをランダムに表示する機能を実装する。 | 低 | **複雑性:** 中, **影響範囲:** 低, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 14\_WebApp\_Handlers.html |
| **UX/UI改善** | UI-13 | **\[UX改善\] キャンセル待ちの説明強化:** 同時予約などでキャンセル待ちになった場合に、その旨をユーザーに分かりやすく説明するメッセージングを実装する。 | 低 | **複雑性:** 低, **影響範囲:** 低, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 05-2\_Backend\_Write.gs, 14\_WebApp\_Handlers.html |
| **UX/UI改善** | UI-16 | **\[UX改善\] ナビゲーションの改善:** ページ遷移のナビゲーションをより直感的で分かりやすいものに改善する。 | 低 | **複雑性:** 低, **影響範囲:** 中, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 13\_WebApp\_Views.html, 14\_WebApp\_Handlers.html |
| **UX/UI改善** | UI-17 | **\[デザイン改善\] 配色調整:** サイト全体の配色を見直し、調整する。 | 低 | **複雑性:** 低, **影響範囲:** 広, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 11\_WebApp\_Config.html |
| **UX/UI改善** | UI-18 | **\[デザイン改善\] フォント変更:** より可読性が高く、デザイン性の良い日本語フォントに変更する。 | 低 | **複雑性:** 低, **影響範囲:** 広, **協力:** 要, **リスク:** 低 | GRP-予約体験改善 | **新規** | 10\_WebApp.html |
| **アーキテクチャ** | ARC-01 | **\[データモデル\] 予約IDの役割の再定義:** 予約IDを「人」ではなく「席」に紐づく固定IDとして再設計する。 | 低 | **複雑性:** 高, **影響範囲:** 広, **協力:** 要, **リスク:** 高 | GRP-データ基盤 | ❌ 未着手 | (全ファイル) |
| **完了済み** | ARC-11 | **\[フロントエンド\] WebAppのファイル分割** | 高 | 中 | GRP-運用基盤 | ✅ **完了** | 08, 09, 11, 12, 13, 14 |
| **完了済み** | ARC-12 | **\[ビジネスロジック\] イベント処理とバッチ処理のファイル分割** | 高 | 中 | GRP-運用基盤 | ✅ **完了** | 02, 02-1, 02-2, 02-3 |
| **完了済み** | FE-15 | **\[予約シート\] 時間制教室のガントチャート自動描画機能** | 高 | 中 | GRP-時刻関連機能統合 | ✅ **完了** | 02-2, 02-3 |
| **完了済み** | BUG-15 | **\[UX\] データ更新後の画面リロード不具合** | 緊急 | 低 | GRP-予約体験改善 | ✅ **完了** | 09\_Backend\_Endpoints.gs, 14\_WebApp\_Handlers.html |
| **完了済み** | BUG-14 | **\[WebApp\] ログイン時に「きろく」が表示されない不具合** | 緊急 | 低 | GRP-参加記録機能 | ✅ **完了** | 13\_WebApp\_Views.html, 14\_WebApp\_Handlers.html |
| **完了済み** | BUG-13 | **\[キャッシュ\] 「きろく」キャッシュが1列ズレて生成される不具合** | 緊急 | 中 | GRP-データ基盤 | ✅ **完了** | 07\_CacheManager.gs |
| **完了済み** | BUG-12 | **\[キャッシュ\] 「きろく」キャッシュが正しく生成されない不具合** | 緊急 | 中 | GRP-データ基盤 | ✅ **完了** | 07\_CacheManager.gs |
| **完了済み** | BUG-11 | **\[会計機能\] 受講時間計算が休憩時間を反映しない不具合** | 緊急 | 中 | GRP-時刻関連機能統合 | ✅ **完了** | 02-3\_BusinessLogic\_SheetUtils.gs |
| **完了済み** | BUG-10 | **\[ガントチャート\] 時刻入力時に描画が消える不具合** | 緊急 | 中 | GRP-時刻関連機能統合 | ✅ **完了** | 02-2\_BusinessLogic\_Handlers.gs, 02-3\_BusinessLogic\_SheetUtils.gs |
| **完了済み** | BUG-09 | **\[予約キャンセル\] 予約キャンセル後に画面が更新されない不具合** | 緊急 | 低 | GRP-予約体験改善 | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | FE-16 | **\[会計機能\] 会計処理と予約データの同期** | 最高 | 中 | GRP-会計機能 | ✅ **完了** | 05-2, 12, 14 |
| **完了済み** | NF-11 | **\[パフォーマンス\] 過去の参加記録のキャッシュ機能** | 最高 | 高 | GRP-データ基盤 | ✅ **完了** | 00-2, 02-1, 07, 09, 13 |
| **完了済み** | NF-12 | **\[パフォーマンス\] 将来の予約キャッシュ機能（個人秘書方式）** | 最高 | 高 | GRP-データ基盤 | ✅ **完了** | 00-2, 02-2, 02-3, 05-2, 09, 14 |
| **完了済み** | BUG-07 | **\[サマリー機能\] アプリ経由の予約時にサマリーが更新されない** | 緊急 | 中 | GRP-データ基盤 | ✅ **完了** | 05-2, 10 |
| **完了済み** | BUG-05 | **\[シート操作\] GASによる数式の上書き問題** | 緊急 | 中 | GRP-データ基盤 | ✅ **完了** | 02-3\_BusinessLogic\_SheetUtils.gs |
| **完了済み** | BUG-08 | **\[予約更新\] 東京教室の予約更新時に時刻が消える** | 緊急 | 中 | GRP-東京教室時刻ロジック | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | FE-11 | **\[予約機能\] 東京教室の時刻自動設定** | 高 | 中 | GRP-東京教室時刻ロジック | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | FE-12 | **\[予約機能\] 東京教室のオプション時刻反映** | 高 | 中 | GRP-東京教室時刻ロジック | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | FE-09 | **\[予約プロセス\] 予約完了時のデータ先読み** | 高 | 中 | GRP-予約体験改善 | ✅ **完了** | 14\_WebApp\_Handlers.html, 10\_Backend\_Endpoints.gs |
| **完了済み** | FE-10 | **\[きろく機能\] 履歴の段階的読み込み** | 高 | 中 | GRP-参加記録機能 | ✅ **完了** | 05-1\_Backend\_Read.gs, 14\_WebApp\_Handlers.html |
| **完了済み** | BUG-06 | **\[きろく機能\] 制作メモが保存されない不具合** | 高 | 低 | GRP-参加記録機能 | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | BUG-04 | **\[ユーザー登録\] 電話番号の型変換不具合** | 緊急 | 低 | GRP-データ基盤 | ✅ **完了** | 04\_Backend\_User.gs |
| **完了済み** | BUG-03 | **\[サマリー機能\] 予約サマリーの不整合** | 緊急 | 中 | GRP-データ基盤 | ✅ **完了** | 03\_BusinessLogic\_Summary.gs, 06\_ExternalServices.gs |
| **完了済み** | UI-09 | **\[WebApp全体\] プロフィール編集ボタンのレスポンシブ対応** | 高 | 低 | GRP-予約体験改善 | ✅ **完了** | 9\_WebApp.html |
| **完了済み** | BUG-01 | **\[会計機能\] 時間制教室の時刻計算不具合** | \- | \- | GRP-時刻関連機能統合 | ✅ **完了** | 02-3\_BusinessLogic\_SheetUtils.gs |
| **完了済み** | BUG-02 | **\[予約プロセス\] 予約時の入力内容が消える不具合** | \- | \- | GRP-予約体験改善 | ✅ **完了** | 13\_WebApp\_Views.html |
| **完了済み** | FE-07 | **\[予約画面\] 時間制教室の予約制約を実装** | \- | \- | GRP-時刻関連機能統合 | ✅ **完了** | 05-2\_Backend\_Write.gs |
| **完了済み** | FE-08 | **\[予約プロセス\] 詳細入力フローの改善** | \- | \- | GRP-予約体験改善 | ✅ **完了** | 13\_WebApp\_Views.html |
| **完了済み** | ARC-07 | **\[データモデル\] 東京教室の時刻管理を統一** | \- | \- | GRP-時刻関連機能統合 | ✅ **完了** | 02-3, 05-2, 13 |
| **完了済み** | ARC-08 | **\[データフロー\] アーカイブ時の参加回数計算ロジックを修正** | \- | \- | GRP-データ基盤 | ✅ **完了** | 02-1\_BusinessLogic\_Batch.gs |
| **完了済み** | UI-03 | **\[予約一覧\] 時刻表示の徹底** | \- | \- | GRP-時刻関連機能統合 | ✅ **完了** | 13\_WebApp\_Views.html |
| **完了済み** | UI-08 | **\[予約画面\] 講座/休憩時間を明記** | \- | \- | GRP-時刻関連機能統合 | ✅ **完了** | 13\_WebApp\_Views.html |
| **完了済み** | UI-04 | **\[予約一覧\] 「制作メモ」の表示** | \- | \- | GRP-参加記録機能 | ✅ **完了** | 13\_WebApp\_Views.html |
| **完了済み** | NF-02 | **\[WebApp\] 過去の参加記録ページ** | \- | \- | GRP-参加記録機能 | ✅ **完了** | 05-1\_Backend\_Read.gs, 13\_WebApp\_Views.html |
